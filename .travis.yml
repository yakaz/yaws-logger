language: erlang
otp_release:
   - 17.3

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y autotools-dev libpam0g-dev erlang-yaws

install:
  - autoreconf -vfi

before_script:
  - ERL_LIBS="/usr/lib:$ERL_LIBS" ./configure

script:
  - ERL_LIBS="/usr/lib:$ERL_LIBS" make distcheck -j4 V=1

after_script:
  - rebar get-deps
  - rebar compile && rebar skip_deps=true eunit

notifications:
  email:
    recipients:
      - christopher.faulet@capflam.org
  on_success: change
  on_failure: always
